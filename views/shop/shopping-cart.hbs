<div class="hero">
  <div class="hero-body">
    {{#if products}}
    {{#each products}}
    <div class="columns is-centered" style="margin-bottom: 2rem;">
      <div
        class="column is-half-desktop is-three-quarters-tablet is-full-mobile has-background-light has-text-centered">
        <h1 class="is-size-5 has-text-centered cart-product-title"><strong>{{this.item.title}}</strong></h1>

        <hr class="is-marginless">

        <span class="is-pulled-left price-box-wrapper">
          <span class="price-text">Price:</span>
          <span class="shoping-cart-price-box">${{formatPrice this.price}}</span>
        </span>
        <a href="/add-one/{{this.item.id}}" class="tooltip is-tooltip-bottom" data-tooltip="Add one">
          <span class="icon has-text-success">
            <i class="fas fa-plus"></i>
          </span>
        </a>
        <a href="/remove-one/{{this.item.id}}" class="tooltip is-tooltip-bottom" data-tooltip="Remove one">
          <span class="icon has-text-danger">
            <i class="fas fa-minus"></i>
          </span>
        </a>
        <a href="/remove-all/{{this.item.id}}" class="tooltip is-tooltip-bottom" data-tooltip="Remove Group">
          <span class="icon has-text-danger">
            <i class="fas fa-trash"></i>
          </span>
        </a>
        <span class="is-pulled-right count-badge-wrapper">
          <span class="count-badge-text">Quantity:</span>
          <span class="badge count-badge">{{this.quantity}}</span>
        </span>
      </div>
    </div>
    {{/each}}

    <div class="columns is-centered">
      <div class="column is-half-desktop is-three-quarters-tablet is-full-mobile">
        <hr class="is-marginless">
      </div>
    </div>

    <div class="columns is-centered">
      <div class="column is-half-desktop is-three-quarters-tablet is-full-mobile">
        <a class="button is-pulled-right" href="/clear-cart">Clear Cart</a>
        <h1 class="is-size-5">Total Price: <strong>${{formatPrice totalPrice}}</strong></h1>
        <h1 class="is-size-5">Total Quantity: <strong>{{totalQuantity}}</strong></h1>

        <hr>

        <!-- Stripe checkout toggle -->
        <form action="/charge" method="POST" class="is-centered has-text-centered">
          <script src="https://checkout.stripe.com/checkout.js" class="stripe-button"
            data-key="pk_test_UMv9tcoaZfgnFNKYDou3b1gV" data-amount="{{stripeCentAmount totalPrice}}"
            data-name="Nodejs demo stripe" data-description="stripe checkout"
            data-image="https://stripe.com/img/documentation/checkout/marketplace.png" data-locale="auto"
            data-zip-code="true" data-billing-address="true" data-shipping-address="true">
            </script>
        </form>
      </div>
    </div>
    {{else}}
    <div class="columns is-centered has-text-centered">
      <div class="column is-half-desktop is-three-quarters-tablet is-full-mobile has-background-light">
        <h1 class="is-size-2">No items in cart</h1>
      </div>
    </div>
    {{/if}}
  </div>
</div>


{{#contentFor 'scripts'}}
<script src="/js/checkout.js"></script>
{{/contentFor}}